# 工作时间 & 加班统计工具 v2.0

基于 Node.js 的 CLI 工具，用于每日上下班打卡、加班时间计算，并自动同步记录到 Obsidian。

## 安装

在 `~/.zshrc` 中添加以下 alias：

```bash
# 上下班统计
alias work="node /Users/lvandamon/Developer/myWorks/work_tracker/work_tracker.js"
alias win="work in"
alias wout="work out"
```

然后执行 `source ~/.zshrc` 使其生效。

## 使用方法

```bash
work in  [HH:MM]                   # 上班打卡（默认当前时间）
work out [HH:MM]                   # 下班打卡（默认当前时间）
work status                        # 查看今日打卡状态 & 预计下班时间
work fix  YYYY-MM-DD HH:MM HH:MM  # 补打/修正某天的记录
work summary [YYYY-MM]             # 月度加班汇总（默认当前月）
```

### 示例

```bash
work in                            # 使用当前时间打上班卡
work in 08:45                      # 手动指定 08:45 上班
work out 19:30                     # 手动指定 19:30 下班
work fix 2026-02-10 08:30 20:00    # 补录 2月10日的记录
work summary 2026-02               # 查看 2026年2月加班汇总
```

快捷 alias：

```bash
win                                # 等同于 work in
wout                               # 等同于 work out
```

## 工时计算规则

| # | 规则 | 说明 |
|---|------|------|
| 1 | 上班时间 | 8:30-17:30，早于 8:30 按 8:30 计算 |
| 2 | 午休扣除 | 11:30-13:00（90 分钟）不计为工作时间 |
| 3 | 加班起算 | 正常下班时间 + 30 分钟后开始计算加班 |
| 4 | 加班取整 | 按 0.5 小时向下取整 |
| 5 | 弹性打卡 | 8:30-9:10 为弹性区间，超过 9:10 算迟到，但仍需满足 7.5h 工作时长 |
| 6 | 最低门槛 | 加班满 0.5 小时即计为加班 |

### 计算示例（以 08:30 上班为例）

- 正常下班时间：17:30（8:30 + 7.5h 工作 + 1.5h 午休）
- 加班起算时间：18:00（17:30 + 30 分钟间隔）

| 下班时间 | 加班时长 | 记录加班 |
|:--------:|:--------:|:--------:|
| 17:30 | 0 | 0h |
| 18:00 | 0 | 0h |
| 18:29 | 29 分钟 | 0h（不满 0.5h） |
| 18:30 | 30 分钟 | 0.5h |
| 19:00 | 60 分钟 | 1.0h |
| 19:45 | 105 分钟 | 1.5h |
| 20:00 | 120 分钟 | 2.0h |

## 数据存储

- **打卡状态**：`~/.work_start_time`（上班打卡后生成，下班打卡后删除）
- **加班记录**：`~/Documents/Obsidian/CDX/Overtime/YYYY-MM.md`（按月存储为 Markdown 表格）

### Obsidian 记录格式

```markdown
# 加班记录

| 日期 | 上班 | 下班 | 工作时间(h) | 加班时间(h) | 备注 |
| :---: | :---: | :---: | :---: | :---: | :--- |
| 2026-02-10 | 08:30 | 19:00 | 7.5 | 1.0 |  |
| 2026-02-11 | 08:45 | 20:30 | 7.5 | 2.0 |  |
```

## 依赖

- Node.js（无第三方依赖）
